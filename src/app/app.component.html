<ng-container *ngIf="vm$ | async as vm">
  <ng-container *ngIf="vm.errorMsg == null; else errorDialog"
    ><lab-header
      [sticky]="((contentSvc.scrollTop$ | async) ?? 0) > 16"
    ></lab-header>
    <router-outlet></router-outlet>
  </ng-container>
  <ng-template #errorDialog>
    <p-dialog
      [visible]="vm.errorMsg != null"
      [modal]="true"
      [draggable]="false"
      [resizable]="false"
      [closable]="false"
      [closeOnEscape]="false"
    >
      <ng-template pTemplate="header">
        <div class="p-dialog-title p-error">
          <i class="fa-solid fa-circle-exclamation me-2"></i>
          <span>{{ 'app.error' | translate }}</span>
        </div>
      </ng-template>
      <div class="p-error">
        <div>{{ 'app.errorDetail' | translate }}</div>
        <div class="mt-4">{{ vm.errorMsg }}</div>
        <div class="text-end mt-4">
          <button
            pButton
            pRipple
            [label]="'app.reset' | translate"
            (click)="reset(vm.game)"
          ></button>
        </div>
      </div>
    </p-dialog>
  </ng-template>
</ng-container>

<lab-content></lab-content>
