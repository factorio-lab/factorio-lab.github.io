<div class="label">Display Rate</div>
<div class="field">
  <div class="flex">
    <input
      id="settings-display-persecond"
      type="radio"
      name="displayRate"
      [value]="DisplayRate.PerSecond"
      [ngModel]="settings.displayRate"
      (change)="setDisplayRate.emit(DisplayRate.PerSecond)"
    />
    <label for="settings-display-persecond">#/sec</label>
  </div>
  <div class="flex">
    <input
      id="settings-display-perminute"
      type="radio"
      name="displayRate"
      [value]="DisplayRate.PerMinute"
      [ngModel]="settings.displayRate"
      (change)="setDisplayRate.emit(DisplayRate.PerMinute)"
    />
    <label for="settings-display-perminute">#/min</label>
  </div>
  <div class="flex">
    <input
      id="settings-display-perhour"
      type="radio"
      name="displayRate"
      [value]="DisplayRate.PerHour"
      [ngModel]="settings.displayRate"
      (change)="setDisplayRate.emit(DisplayRate.PerHour)"
    />
    <label for="settings-display-perhour">#/hr</label>
  </div>
</div>
<div class="label">Precision</div>
<div class="field">
  <lab-icon iconId="iron-plate"></lab-icon>
  <div class="flex">
    <input
      id="settings-precision-item-decimals"
      type="radio"
      name="itemPrecision"
      [value]="false"
      [ngModel]="settings.itemPrecision == null"
      (change)="setItemPrecision.emit(initial.itemPrecision)"
    />
    <label for="settings-precision-item-decimals">
      <input
        id="settings-precision-item-value"
        type="number"
        placeholder="0.334"
        min="0"
        step="1"
        [disabled]="settings.itemPrecision == null"
        [value]="settings.itemPrecision"
        (change)="emitNumber(setItemPrecision, $event)"
      />
    </label>
  </div>
  <div class="flex">
    <input
      id="settings-precision-item-fractions"
      type="radio"
      name="itemPrecision"
      [value]="true"
      [ngModel]="settings.itemPrecision == null"
      (change)="setItemPrecision.emit(null)"
    />
    <label for="settings-precision-item-fractions">⅓</label>
  </div>
</div>
<div class="field">
  <lab-icon iconId="transport-belt"></lab-icon>
  <div class="flex">
    <input
      id="settings-precision-belt-decimals"
      type="radio"
      name="beltPrecision"
      [value]="false"
      [ngModel]="settings.beltPrecision == null"
      (change)="setBeltPrecision.emit(initial.beltPrecision)"
    />
    <input
      id="settings-precision-belt-value"
      type="number"
      placeholder="0.4"
      min="0"
      step="1"
      [disabled]="settings.beltPrecision == null"
      [value]="settings.beltPrecision"
      (change)="emitNumber(setBeltPrecision, $event)"
    />
  </div>
  <div class="flex">
    <input
      id="settings-precision-belt-fractions"
      type="radio"
      name="beltPrecision"
      [value]="true"
      [ngModel]="settings.beltPrecision == null"
      (change)="setBeltPrecision.emit(null)"
    />
    <label for="settings-precision-belt-fractions">⅓</label>
  </div>
</div>
<div class="field">
  <lab-icon iconId="assembling-machine-1"></lab-icon>
  <div class="flex">
    <input
      id="settings-precision-factory-decimals"
      type="radio"
      name="factoryPrecision"
      [value]="false"
      [ngModel]="settings.factoryPrecision == null"
      (change)="setFactoryPrecision.emit(initial.factoryPrecision)"
    />
    <input
      id="settings-precision-factory-value"
      type="number"
      placeholder="0.4"
      min="0"
      step="1"
      [disabled]="settings.factoryPrecision == null"
      [value]="settings.factoryPrecision"
      (change)="emitNumber(setFactoryPrecision, $event)"
    />
  </div>
  <div class="flex">
    <input
      id="settings-precision-factory-fractions"
      type="radio"
      name="factoryPrecision"
      [value]="true"
      [ngModel]="settings.factoryPrecision == null"
      (change)="setFactoryPrecision.emit(null)"
    />
    <label for="settings-precision-factory-fractions">⅓</label>
  </div>
</div>
<div class="label">Factory</div>
<div class="field">
  <div class="relative">
    <lab-icon
      class="clickable"
      [iconId]="settings.belt"
      (click)="openSelect = OpenSelect.Belt"
    ></lab-icon>
    <lab-select
      *ngIf="openSelect === OpenSelect.Belt"
      [data]="data"
      [selectedId]="settings.belt"
      [optionsType]="OptionsType.Belt"
      (cancel)="openSelect = OpenSelect.None"
      (selectId)="setBelt.emit($event)"
    >
    </lab-select>
  </div>
  <div class="relative">
    <lab-icon
      class="clickable"
      [iconId]="settings.assembler"
      (click)="openSelect = OpenSelect.Assembler"
    ></lab-icon>
    <lab-select
      *ngIf="openSelect === OpenSelect.Assembler"
      [data]="data"
      [selectedId]="settings.assembler"
      [optionsType]="OptionsType.Assembler"
      (cancel)="openSelect = OpenSelect.None"
      (selectId)="setAssembler.emit($event)"
    >
    </lab-select>
  </div>
  <div class="relative">
    <lab-icon
      class="clickable"
      [iconId]="settings.furnace"
      (click)="openSelect = OpenSelect.Furnace"
    ></lab-icon>
    <lab-select
      *ngIf="openSelect === OpenSelect.Furnace"
      [data]="data"
      [selectedId]="settings.furnace"
      [optionsType]="OptionsType.Furnace"
      (cancel)="openSelect = OpenSelect.None"
      (selectId)="setFurnace.emit($event)"
    >
    </lab-select>
  </div>
  <div class="relative">
    <lab-icon
      class="clickable"
      [iconId]="settings.oilRecipe"
      (click)="openSelect = OpenSelect.OilRecipe"
    ></lab-icon>
    <lab-select
      *ngIf="openSelect === OpenSelect.OilRecipe"
      [data]="data"
      [selectedId]="settings.oilRecipe"
      [optionsType]="OptionsType.OilRecipe"
      [selectType]="SelectType.Recipe"
      (cancel)="openSelect = OpenSelect.None"
      (selectId)="setOilRecipe.emit($event)"
    >
    </lab-select>
  </div>
  <div class="relative">
    <lab-icon
      class="clickable"
      [iconId]="settings.fuel"
      (click)="openSelect = OpenSelect.Fuel"
    ></lab-icon>
    <lab-select
      *ngIf="openSelect === OpenSelect.Fuel"
      [data]="data"
      [optionsType]="OptionsType.Fuel"
      [selectedId]="settings.fuel"
      (cancel)="openSelect = OpenSelect.None"
      (selectId)="setFuel.emit($event)"
    >
    </lab-select>
  </div>
</div>
<div class="field">
  <lab-icon [iconId]="ItemId.Pipe"></lab-icon>
  <input
    type="number"
    placeholder="Max Flow Rate"
    min="0"
    step="1"
    [value]="settings.flowRate"
    (change)="emitNumber(setFlowRate, $event)"
  />
  <div>#/sec</div>
  <a href="https://wiki.factorio.com/Fluid_system#Pipelines" target="_blank"
    >(Wiki)</a
  >
</div>
<div class="label">Modules</div>
<div class="field">
  <div class="relative">
    <lab-icon
      class="clickable"
      [iconId]="settings.prodModule"
      (click)="openSelect = OpenSelect.ProdModule"
    ></lab-icon>
    <lab-select
      *ngIf="openSelect === OpenSelect.ProdModule"
      [data]="data"
      [selectedId]="settings.prodModule"
      [optionsType]="OptionsType.ProdModule"
      (cancel)="openSelect = OpenSelect.None"
      (selectId)="setProdModule.emit($event)"
    >
    </lab-select>
  </div>
  <div class="relative">
    <lab-icon
      class="clickable"
      [iconId]="settings.speedModule"
      (click)="openSelect = OpenSelect.SpeedModule"
    ></lab-icon>
    <lab-select
      *ngIf="openSelect === OpenSelect.SpeedModule"
      [data]="data"
      [selectedId]="settings.speedModule"
      [optionsType]="OptionsType.SpeedModule"
      (cancel)="openSelect = OpenSelect.None"
      (selectId)="setSpeedModule.emit($event)"
    >
    </lab-select>
  </div>
  <lab-icon [iconId]="ItemId.Beacon"></lab-icon>
  <div class="relative">
    <lab-icon
      class="clickable"
      [iconId]="settings.beaconModule"
      (click)="openSelect = OpenSelect.BeaconModule"
    ></lab-icon>
    <lab-select
      *ngIf="openSelect === OpenSelect.BeaconModule"
      [data]="data"
      [selectedId]="settings.beaconModule"
      [optionsType]="OptionsType.SpeedModule"
      (cancel)="openSelect = OpenSelect.None"
      (selectId)="setBeaconModule.emit($event)"
    >
    </lab-select>
  </div>
  <input
    type="number"
    placeholder="Beacons"
    min="0"
    step="1"
    [value]="settings.beaconCount"
    (change)="emitNumber(setBeaconCount, $event)"
  />
</div>
<div class="field">
  <div
    class="flex clickable"
    (click)="setDrillModule.emit(!settings.drillModule)"
  >
    <lab-icon [iconId]="ItemId.MiningProductivity" [scale]="true"></lab-icon>
    <lab-icon
      [iconId]="settings.drillModule ? ItemId.SpeedModule3 : ItemId.Module"
    ></lab-icon>
  </div>
</div>
<div class="label">Bonuses</div>
<div class="field">
  <lab-icon [iconId]="ItemId.MiningProductivity" [scale]="true"></lab-icon>
  <div class="field">
    +
    <input
      type="number"
      placeholder="Mining Productivity Bonus"
      min="0"
      step="10"
      [value]="settings.miningBonus"
      (change)="emitNumber(setMiningBonus, $event)"
    />
    %
  </div>
</div>
<div class="field">
  <lab-icon [iconId]="ItemId.Lab" [scale]="true"></lab-icon>
  <select
    [ngModel]="settings.researchSpeed"
    (change)="emitNumber(setResearchSpeed, $event)"
  >
    <option [value]="ResearchSpeed.Speed0">No Research Bonus</option>
    <option [value]="ResearchSpeed.Speed1">Research Speed 1</option>
    <option [value]="ResearchSpeed.Speed2">Research Speed 2</option>
    <option [value]="ResearchSpeed.Speed3">Research Speed 3</option>
    <option [value]="ResearchSpeed.Speed4">Research Speed 4</option>
    <option [value]="ResearchSpeed.Speed5">Research Speed 5</option>
    <option [value]="ResearchSpeed.Speed6">Research Speed 6</option>
  </select>
</div>
